// document.getElementById('send-test-email-button').addEventListener('click', function () {//获取ajax按钮
//   var xhr = new XMLHttpRequest();
//   xhr.open('POST', '/wp-admin/admin-ajax.php');
//   xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
//   xhr.onreadystatechange = function () {
//     if (xhr.readyState === 4) {
//       if (xhr.status === 200) {
//         var response = JSON.parse(xhr.responseText);
//         if (response.success) {
//           alert(response.data);
//         } else {
//           alert(response.data);
//         }
//       }
//     }
//   };
//   xhr.send('action=send_test_email');//发送邮件函数
// });


// 获取包含 len-footer-one-word 类的元素
let footerElement = document.querySelector('.len-footer-one-word');
let one_word_div = document.querySelector('.len-on-word-source')
if (footerElement.classList.contains('len-footer-one-word') && one_word_div !== null) {
  // 获取 josn-url 属性的值
  var jsonUrl = footerElement.getAttribute('josn-url');

  // 使用 fetch() 函数获取名言数据
  fetch(jsonUrl)
    .then(response => response.json())
    .then(data => {
      // 检查是否成功获取数据
      if (data.success) {
        // 获取名言数组
        const quotes = data.quotes;

        // 随机选择一个名言
        const keys = Object.keys(quotes);
        const randomKey = keys[Math.floor(Math.random() * keys.length)];
        const randomQuote = quotes[randomKey];

        // 将名言显示在指定的 div 中
        const sourceDiv = document.querySelector('.len-on-word-source');
        sourceDiv.textContent = randomKey + '———';

        const dictumDiv = document.querySelector('.len-on-word-dictum');
        dictumDiv.textContent = '『' + randomQuote + '』';
      } else {
        console.error('Failed to fetch quotes:', data.message);
      }
    })
    .catch(error => {
      console.error('Error fetching quotes:', error);
    });
}




