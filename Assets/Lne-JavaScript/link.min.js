var linksElement = document.getElementById('mt20');

// 如果存在，则创建Swiper实例
if (linksElement) {
  document.addEventListener('DOMContentLoaded', function () {
    var form = document.querySelector('.mt20');
    var nameInput = document.getElementById('blink_name');
    var urlInput = document.getElementById('blink_url');
    var imgInput = document.getElementById('blink_image');

    form.addEventListener('submit', function (event) {
      // 检查名称是否为空
      if (nameInput.value.trim() === '') {
        Qmsg.warning({
          content: '名称不能为空',
          position: 'top',
          showClose: true,
          autoClose: true
        });
        event.preventDefault(); // 阻止表单提交
        return; // 停止执行后续代码
      }

      // 检查简介是否包含HTML或PHP格式的内容
      var namePattern = /<\s*\/?[^>]+>/gi;
      if (namePattern.test(nameInput.value)) {
        Qmsg.warning({
          content: '名称不能包含HTML或PHP格式的内容',
          position: 'top',
          showClose: true,
          autoClose: true
        });
        event.preventDefault(); // 阻止表单提交
        return; // 停止执行后续代码
      }

      // 检查链接格式
      var urlPattern = /^(http:\/\/|https:\/\/).*/;
      if (!urlPattern.test(urlInput.value)) {
        Qmsg.warning({
          content: '链接格式错误，请输入有效的HTTP或HTTPS链接',
          position: 'top',
          showClose: true,
          autoClose: true
        });
        event.preventDefault(); // 阻止表单提交
        return; // 停止执行后续代码
      }

      // 检查图片链接格式
      if (!urlPattern.test(imgInput.value)) {
        Qmsg.warning({
          content: '图片链接格式错误，请输入有效的HTTP或HTTPS链接',
          position: 'top',
          showClose: true,
          autoClose: true
        });
        event.preventDefault(); // 阻止表单提交
        return; // 停止执行后续代码
      }

      // 检查图片链接是否为图片格式
      var imgExtension = imgInput.value.split('.').pop().toLowerCase();
      if (!['jpg', 'jpeg', 'png', 'gif', 'webp', 'ico'].includes(imgExtension)) {
        Qmsg.warning({
          content: '图片链接必须是图片格式（jpg、jpeg、png、gif、webp、ico）',
          position: 'top',
          showClose: true,
          autoClose: true
        });
        event.preventDefault(); // 阻止表单提交
        return; // 停止执行后续代码
      }

      // 成功提交消息
      Qmsg.success({
        content: '提交成功',
        position: 'top',
        showClose: true,
        autoClose: true
      });
    });

    var resetButton = form.querySelector('button[type="reset"]');
    resetButton.addEventListener('click', function () {
      form.reset(); // 清除表单内容
    });
  });
}