document.addEventListener('DOMContentLoaded', function () {
    // 获取点击的元素
    var tippingDiv = document.querySelector('.len-article-tipping');
    var payOpenDiv = document.querySelector('.len-pay-open');

    // 获取要显示/隐藏的元素
    var wxPayDiv = document.querySelector('.len-al-wx-pay');
    var pupDiv = document.querySelector('.len-pop-ups');

    // 添加点击事件监听器（用于len-article-tipping）
    tippingDiv.addEventListener('click', toggleWxPayVisibility);

    // 添加点击事件监听器（用于len-pay-open）
    payOpenDiv.addEventListener('click', toggleWxPayVisibility);

    // 定义显示/隐藏的函数
    function toggleWxPayVisibility() {
        // 切换显示/隐藏状态
        if (wxPayDiv.style.display === 'none') {
            wxPayDiv.style.display = 'block';
        } else {
            wxPayDiv.style.display = 'none';
        }

        if (pupDiv.style.display === 'none') {
            pupDiv.style.display = 'block';
        } else {
            pupDiv.style.display = 'none';
        }

    }
});

document.addEventListener('DOMContentLoaded', function () {
    // 获取点击的元素
    var shareDiv = document.querySelector('.len-article-share');
    var shareOpenDiv = document.querySelector('.len-share-open');

    // 获取要显示/隐藏的元素
    var shareblockDiv = document.querySelector('.len-share-blcok');
    var pupDiv = document.querySelector('.len-pop-ups');

    // 添加点击事件监听器（用于len-article-tipping）
    shareDiv.addEventListener('click', toggleWxPayVisibility);

    // 添加点击事件监听器（用于len-pay-open）
    shareOpenDiv.addEventListener('click', toggleWxPayVisibility);

    // 定义显示/隐藏的函数
    function toggleWxPayVisibility() {
        // 切换显示/隐藏状态
        if (shareblockDiv.style.display === 'none') {
            shareblockDiv.style.display = 'block';
        } else {
            shareblockDiv.style.display = 'none';
        }

        if (pupDiv.style.display === 'none') {
            pupDiv.style.display = 'block';
        } else {
            pupDiv.style.display = 'none';
        }

    }
});

function togglePayment(paymentMethod) {
    var alipayQr = document.querySelector('.wx-alpay-qr .pay-qr-img:nth-child(1)');
    var wechatQr = document.querySelector('.wx-alpay-qr .pay-qr-img:nth-child(2)');

    if (paymentMethod === 'alipay') {
        alipayQr.style.display = 'block';
        wechatQr.style.display = 'none';
    } else if (paymentMethod === 'wechat') {
        alipayQr.style.display = 'none';
        wechatQr.style.display = 'block';
    }
}

$.fn.postLike = function () {
    if ($(this).hasClass('done')) {
        return false;
    } else {
        $(this).addClass('done');
        var id = $(this).data("id"),
            action = $(this).data('action'),
            rateHolder = $(this).children('.count');
        var ajax_data = {
            action: "bigfa_like",
            um_id: id,
            um_action: action
        };
        $.post("/wp-admin/admin-ajax.php", ajax_data,
            function (data) {
                $(rateHolder).html(data);
            });
        return false;
    }
};
$(document).on("click", ".favorite",
    function () {
        $(this).postLike();
    });

//表情包引用

document.addEventListener('DOMContentLoaded', function () {
    // 检查页面中是否存在具有指定ID的元素
    var OwOElement = document.getElementById('OwO');

    // 如果存在，则创建Swiper实例
    if (OwOElement) {
        var apiUrl = window.location.origin + '/wp-content/themes/Len-Free/Assets/Lne-JavaScript/memes.min.json';
        var OwO_demo = new OwO({
            logo: '表情包',
            container: document.getElementsByClassName('OwO')[0],
            target: document.getElementsByClassName('OwO-textarea')[0],
            api: apiUrl,
            position: 'down',
            width: '45%',
            maxHeight: '250px'
        });
    }
});

